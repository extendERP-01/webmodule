<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/master}">
<head>
<style type="text/css">
.highcharts-exporting-group {
	display: none;
}

.slidebox {
	padding: 14px;
	margin-top: 0px;
	margin: 0px 10px;
}

.form-group label {
	font-size: 12px;
	position: relative;
	top: 4px;
}

.holdCls {
	background-color: rgb(0, 143, 0);
}
</style>
<script type="text/javascript">
	function openNav() {
		document.getElementById("mySidenav").style.cssText = "width: 350px; position: absolute; right:-30px; overflow: hidden; height:auto; top:200px;";

		document.getElementById("main_content").style.width = "72%";
	}

	function closeNav() {
		document.getElementById("mySidenav").style.width = "0";
		document.getElementById("main_content").style.width = "100%";
	}
	var count = 0;
	function allCheck() {
		count++;

		if (count == 1) {
			$('.checkCls').prop("checked", true);
		} else {
			count = 0;
			$('.checkCls').prop("checked", false);
		}
	}

	var count1 = 0;
	function allCheck1() {
		count1++;

		if (count1 == 1) {
			$('.checkCls1').prop("checked", true);
		} else {
			count1 = 0;
			$('.checkCls1').prop("checked", false);
		}
	}

	function cancelBar() {
		var id = document.getElementById("closeKey");
		id.style.display = "block";
		if ($('#searchBar').val() == null || $('#searchBar').val() == "") {
			id.style.display = "none";
		}
	}
</script>

<script type="text/javascript">
	$(document).ready(function() {
		//changeOpt();

		var reqId = $("#reqHeadId").html();
		if (reqId) {
			var holdStatus = $("#isHold").val();

			if (holdStatus == '0') {
				$('#createdDiv').addClass('green-box');
				$('#createdDiv').removeClass('grey-box');
				$('#activeDiv').addClass('grey-box');
				$('#activeDiv').removeClass('green-box');
				$('#completeDiv').addClass('grey-box');
				$('#completeDiv').removeClass('green-box');
				$('#onHoldDiv').addClass('grey-box');
				$('#onHoldDiv').removeClass('green-box');
			} else if (holdStatus == '1') {
				$('#activeDiv').addClass('green-box');
				$('#activeDiv').removeClass('grey-box');
				$('#createdDiv').addClass('grey-box');
				$('#createdDiv').addClass('grey-box');
				$('#completeDiv').addClass('grey-box');
				$('#completeDiv').removeClass('green-box');
				$('#onHoldDiv').addClass('grey-box');
				$('#onHoldDiv').removeClass('green-box');
			} else if (holdStatus == '2') {
				$('#completeDiv').addClass('green-box');
				$('#completeDiv').removeClass('grey-box');
				$('#createdDiv').addClass('grey-box');
				$('#createdDiv').addClass('grey-box');
				$('#activeDiv').addClass('grey-box');
				$('#activeDiv').removeClass('green-box');
				$('#onHoldDiv').addClass('grey-box');
				$('#onHoldDiv').removeClass('green-box');
			} else if (holdStatus == '4') {
				$('#onHoldDiv').addClass('green-box');
				$('#onHoldDiv').removeClass('grey-box');
				$('#completeDiv').removeClass('green-box');
				$('#completeDiv').addClass('grey-box');
				$('#createdDiv').addClass('grey-box');
				$('#createdDiv').addClass('grey-box');
				$('#activeDiv').addClass('grey-box');
				$('#activeDiv').removeClass('green-box');
			}
		} else {
			$('#createdDiv').addClass('green-box');
			$('#createdDiv').removeClass('grey-box');
			$('#activeDiv').addClass('grey-box');
			$('#activeDiv').removeClass('green-box');
			$('#completeDiv').addClass('grey-box');
			$('#completeDiv').removeClass('green-box');
			$('#onHoldDiv').addClass('grey-box');
			$('#onHoldDiv').removeClass('green-box');
		}
		$('.collapse').on('show.bs.collapse', function() {
			$(this).siblings('.panel-heading').addClass('active');
		});

		$('.collapse').on('hide.bs.collapse', function() {
			$(this).siblings('.panel-heading').removeClass('active');
		});
		$("#newBtn").click(function() {
			$("#myGrid").hide();
			$("#reqTable").hide();
			$(".btn-hs").hide();
			$("#demo").show();
		})
		/* 
		 $("#copyBtn").click(function() {
		 $("#myGrid").hide();
		 $("#reqTable").hide();
		 $(".btn-hs").hide();
		 $("#demo").show();
		 }) */

		$("#cancelBtn").click(function() {
			$("#reqTable").show();
			$(".btn-hs").show();
			$("#myGrid").show();
			$("#demo").hide();
		});

		$("#quarter").click(function() {
			$("#myTbl").hide();
			$(".btn-hs").hide();
			$("#demo").show();
		})

		$("#receiveDate").datetimepicker({
			format : 'd-m-Y',
			closeOnDateSelect : true,
			timepicker : false,
		})

	});

	$("input[class='myCheckbox']").click(function() {
		if ($("#formID input:checkbox:checked").length > 0) {
			$(".checkSubmit").addClass('active');
		} else {
			$(".checkSubmit").removeClass('active');
		}
	});

	function cancelBar() {
		var id = document.getElementById("closeKey");
		id.style.display = "block";
		if ($('#quickFilter').val() == null || $('#quickFilter').val() == "") {
			id.style.display = "none";
		}
	}
</script>

<script>
	var columnDefs = [
			{
				headerCheckboxSelection : true,
				headerCheckboxSelectionFilteredOnly : true,
				checkboxSelection : true,
				sortable : false,
				filter : false,
				resizable : true,
				width : 20
			},
			{
				headerName : "Requisition Id",
				field : "reqId",
				cellRenderer : function(params) {
					return '<a onclick=editRequisition("' + params.data.reqId
							+ '") href="javascript:void(0)">'
							+ params.data.reqId + '</a>';
				}

			}, {
				headerName : "Description",
				field : "desc"
			}, {
				headerName : "Type",
				field : "reqType"
			}, {
				headerName : "Priority",
				field : "reqPrior"

			}, {
				headerName : "Receive By Date",
				field : "receiveDate"

			}, {
				headerName : "Status",
				field : "approveStatus"
			}, {
				headerName : "Created By",
				field : "createdBy"

			}, {
				headerName : "Created Date",
				field : "createdOn"

			} ];

	// for product table

	var productDefs = [
			{
				headerCheckboxSelection : true,
				headerCheckboxSelectionFilteredOnly : true,
				checkboxSelection : true,
				sortable : false,
				filter : false,
				resizable : true,
				width : 20
			},
			{
				headerName : "SKU",
				field : "sku",
				cellRenderer : function(params) {
					return '<a onclick=editProduct("' + params.data.sku
							+ '") href="javascript:void(0)">' + params.data.sku
							+ '</a>';
				}
			}, {
				headerName : "Name",
				field : "itemName"

			}, {
				headerName : "itemId",
				field : "itemId",
				hide : "true"
			}, {
				headerName : "Brand",
				field : "brand"
			}, {
				headerName : "Location",
				field : "location"

			}, {
				headerName : "locationId",
				field : "locationId",
				hide : "true"

			}, {
				headerName : "Cost Center",
				field : "costCenter"

			}, {
				headerName : "costCenterId",
				field : "costCenterId",
				hide : "true"
			}, {
				headerName : "Quantity",
				field : "qty"

			}, {
				headerName : "UOM",
				field : "uom"

			}, {
				headerName : "uomId",
				field : "uomId",
				hide : "true"
			}, {
				headerName : "Estimated Price",
				field : "estimatedPrice",
				type : 'rightAligned'

			}, {
				headerName : "Last Purchase Price",
				field : "lastPurchaseUnitPrice",
				type : 'rightAligned'

			}, {
				headerName : "Created Date",
				field : "createdOn"

			} ];

	var activityDefs = [ {
		headerCheckboxSelection : true,
		headerCheckboxSelectionFilteredOnly : true,
		checkboxSelection : true,
		sortable : false,
		filter : false,
		resizable : true,
		width : 20
	}, {
		headerName : "Activity Name",
		field : "operationName"
	}, {
		headerName : "User Name",
		field : "operationBy"
	}, {
		headerName : "Created Date",
		field : "operationOn"

	} ];

	// let the grid know which columns and what data to use product table
	var activityOptions = {
		columnDefs : activityDefs,

		defaultColDef : {
			sortable : true,
			filter : true,
			resizable : true,
			width : 353
		}

	};

	// let the grid know which columns and what data to use activity table
	var productOptions = {
		columnDefs : productDefs,
		defaultColDef : {
			sortable : true,
			filter : true,
			resizable : true,
			width : 153
		}

	};

	// let the grid know which columns and what data to use
	var gridOptions = {
		columnDefs : columnDefs,
		defaultColDef : {
			sortable : true,
			filter : true,
			resizable : true,
			width : 153
		}

	};

	// setup the grid after the page has finished loading
	document.addEventListener('DOMContentLoaded', function() {
		var gridDiv = document.querySelector('#myGrid');
		new agGrid.Grid(gridDiv, gridOptions);

		var gridDiv = document.querySelector('#product');
		new agGrid.Grid(gridDiv, productOptions);

		var gridDiv = document.querySelector('#activity');
		new agGrid.Grid(gridDiv, activityOptions);

	});

	agGrid.simpleHttpRequest({
		url : 'view-requisition-trough-ajax'
	}).then(function(data) {
		var len = data.length;
		$('#totalReq').find('span').html(len);

		gridOptions.api.setRowData(data);
	});

	function resetState() {
		gridOptions.columnApi.resetColumnState();

	}

	function onQuickFilterChanged() {
		gridOptions.api
				.setQuickFilter(document.getElementById('quickFilter').value);
	}

	function switchPage() {

		var selectedRows = gridOptions.api.getSelectedRows();
		var selectedRowsString = '';
		selectedRows.forEach(function(selectedRow, index) {
			if (index > 0) {
				selectedRowsString += ',';
			}
			selectedRowsString += selectedRow.itemId;
		});

		// for product table
		agGrid.simpleHttpRequest({
			url : 'view-requisition-item-trough-ajax?id=' + selectedRowsString
		}).then(function(data) {
			productOptions.api.setRowData(data);
		});

		agGrid.simpleHttpRequest({
			url : 'view-requisition-activity-log?id=' + selectedRowsString
		}).then(function(data) {
			activityOptions.api.setRowData(data);
		});

	}

	function editProduct(prodId) {

		var reqId = $("#reqHeadId").html();
		if (prodId && reqId) {
			$.ajax({
				type : "GET",
				url : "view-requisition-get-product-by-req-sku?id=" + reqId
						+ "&prodId=" + prodId,
				dataType : "json",
				contentType : "application/json",
				success : function(response) {
					console.log(response);
					if (response.message == "success") {
						if (response.body.length != 0) {
							$("#sku").html(prodId);
							$("#brandId").html(response.body.brand);
							$("#itemId").html(response.body.itemId);
							$("#itemName").html(response.body.itemName);
							$("#locationId").val(response.body.locationId);
							$("#quantity").val(response.body.qty);
							$("#uom").val(response.body.uomId);
							$("#estimatedPrice").val(
									response.body.estimatedPrice);
							$("#totalEstPrc").val(
									response.body.estimatedTotalPrice);
							$("#lastPurchaseUnitPrice").val(
									response.body.lastPurchaseUnitPrice);
							$("#lastPurchaseTotalPrice").val(
									response.body.lastPurchaseTotalPrice);
							$("#search").val(response.body.itemName);
						}
					}

				},
				error : function(data) {
					console.log(data)
				}
			})
		}

		openNav();

	}
	function editRequisition(reqId) {
		$("#myGrid").hide();
		$("#reqTable").hide();
		$(".btn-hs").hide();
		$("#demo").show();

		agGrid.simpleHttpRequest({
			url : 'view-requisition-item-trough-ajax?id=' + reqId
		}).then(function(data) {
			$("#desc").val(data[0].desc);
			$("#reqType").val(data[0].reqType);
			$("#reqPrior").val(data[0].reqPrior);
			$("#receiveDate").val(data[0].receiveDate);
			$("#isHold").val(data[0].holdStatus);
			$("#reqId").val(data[0].reqId);
			$("#reqHeadId").html(data[0].reqId);
			productOptions.api.setRowData(data);
		});

		agGrid.simpleHttpRequest({
			url : 'view-requisition-activity-log?id=' + reqId
		}).then(function(data) {
			activityOptions.api.setRowData(data);
		});

		putOnHold();
	}
	function copy() {
		var selectedRows = gridOptions.api.getSelectedRows();
		var selectedRowsString = '';
		var count = 0;
		selectedRows
				.forEach(function(selectedRow, index) {
					if (count > 0) {
						$("#alert").modal('show');
						document.getElementById("textId").innerHTML = "Please Select Only one Record For Copy !";
					} else {
						selectedRowsString += selectedRow.reqId;
					}
					count++;
				});

		if (selectedRowsString) {
			$("#myGrid").hide();
			$("#reqTable").hide();
			$(".btn-hs").hide();
			$("#demo").show();

			agGrid.simpleHttpRequest(
					{
						url : 'view-requisition-item-trough-ajax?id='
								+ selectedRowsString
					}).then(function(data) {
				$("#desc").val(data[0].desc);
				$("#reqType").val(data[0].reqType);
				$("#reqPrior").val(data[0].reqPrior);
				$("#receiveDate").val(data[0].receiveDate);
				$("#isHold").val(data[0].holdStatus);
				$("#reqId").val(null);
				$("#reqHeadId").html(data[0].reqId);
				//$("#reqId").val(data[0].reqId);
				for (var i = 0; i < data.length; i++) {
					data[i].reqId = '';
				}
				productOptions.api.setRowData(data);
			});

			agGrid.simpleHttpRequest({
				url : 'view-requisition-activity-log?id=' + selectedRowsString
			}).then(function(data) {
				activityOptions.api.setRowData(data);
			});

			putOnHold();
		} else {
			$("#alert").modal('show');
			document.getElementById("textId").innerHTML = "Please Select Atleast one Record !";
		}

	}

	function deleteFun() {
		$('#delete').modal('show');
	}
	function deleteProduct() {
		$('#deleteProduct').modal('show');
	}
	function deleteOnclick() {
		var selectedRows = gridOptions.api.getSelectedRows();
		var selectedRowsString = '';
		selectedRows.forEach(function(selectedRow, index) {
			if (index > 0) {
				selectedRowsString += ',';
			}
			selectedRowsString += selectedRow.reqId;
		});
		if (selectedRowsString) {
			var item = {};
			item.moduleId = localStorage.getItem('module');
			item.componentId = localStorage.getItem('function');
			item.subComponentId = localStorage.getItem('activity');
			item.reqId = selectedRowsString;
			$.ajax({
				type : "POST",
				url : "view-requisition-delete-th-ajax",
				dataType : "json",
				contentType : "application/json",
				data : JSON.stringify(item),
				success : function(response) {

					if (response.message == "Success") {
						window.location.href = "/inventory/view-requisition";
					} else {
						swal({
							title : response.code,
							text : response.message,
							type : "warning"
						})
					}
				},
				error : function(data) {
					console.log(data)
				}
			})
		} else {
			$("#alert").modal('show');
			document.getElementById("textId").innerHTML = "Please Select Atleast one Record !";
		}

	}

	function deleteProductOnclick() {
		var selectedRows = productOptions.api.getSelectedRows();
		productOptions.api.applyTransaction({
			remove : selectedRows
		});
		cancelModalProductBtn();

	}

	function cancelModalBtn() {
		$("#deleteModalBtn").removeAttr("disabled");
	}
	function cancelModalProductBtn() {
		$("#deleteModalBtn").removeAttr("disabled");
		$('#deleteProduct').modal('hide');
	}

	function approve() {
		var selectedRows = gridOptions.api.getSelectedRows();
		var selectedRowsString = '';
		selectedRows.forEach(function(selectedRow, index) {
			if (index > 0) {
				selectedRowsString += ',';
			}
			selectedRowsString += selectedRow.reqId;
		});
		if (selectedRowsString) {
			var item = {};
			item.moduleId = localStorage.getItem('module');
			item.componentId = localStorage.getItem('function');
			item.subComponentId = localStorage.getItem('activity');
			item.reqId = selectedRowsString;
			$.ajax({
				type : "POST",
				url : "view-requisition-approve-th-ajax",
				dataType : "json",
				contentType : "application/json",
				data : JSON.stringify(item),
				success : function(response) {

					if (response.message == "Success") {
						window.location.href = "/inventory/view-requisition";
					} else {
						swal({
							title : response.code,
							text : response.message,
							type : "warning"
						})
					}
				},
				error : function(data) {
					console.log(data)
				}
			})
		} else {
			$("#alert").modal('show');
			document.getElementById("textId").innerHTML = "Please Select Atleast one Record !";
		}
	}
</script>
<script type="text/javascript">
	function stockReport() {

		var selectedRows = productOptions.api.getSelectedRows();
		var selectedRowsString = '';
		selectedRows.forEach(function(selectedRow, index) {
			if (index > 0) {
				selectedRowsString += ',';
			}
			selectedRowsString += selectedRow.itemId;
		});

		if (selectedRowsString) {

			$('#lineGraph').modal('show');
			$
					.ajax({
						type : "GET",
						url : "/inventory/view-stock-daily-report?id="
								+ selectedRowsString,
						dataType : 'json',
						data : selectedRowsString,
						success : function(response) {
							if (response.message == "success") {
								$("#graphTable").empty();
								lineGrapg(response.body.dataList,
										response.body.dates, 'Stock');
								var tableHeader = '<tr>';
								for (var i = 0; i < response.body.dates.length; i++) {

									tableHeader = tableHeader + '<td>'
											+ response.body.dates[i] + '</td>';
								}
								tableHeader = tableHeader + '</tr>';
								$("#graphTable").append(tableHeader);

								for (var i = 0; i < response.body.dataList.length; i++) {
									var tableBody = '<tr><td>'
											+ response.body.dataList[i].name
											+ '</td>';
									for (var j = 0; j < response.body.dataList[i].data.length; j++) {
										tableBody = tableBody
												+ '<td>'
												+ response.body.dataList[i].data[j]
												+ '</td>';
									}
									tableBody = tableBody + '</tr>';
									$("#graphTable").append(tableBody);
								}

							}
						},
						error : function(data) {
							console.log(data);
						}
					})
		} else {
			swal("Please Select At least One Product.");
		}

	}

	function getExcelReport() {
		var selectedRows = productOptions.api.getSelectedRows();
		var selectedRowsString = '';
		selectedRows.forEach(function(selectedRow, index) {
			if (index > 0) {
				selectedRowsString += ',';
			}
			selectedRowsString += selectedRow.itemId;
		});

		window.location.href = "/inventory/view-stock-daily-report-excel?id="
				+ selectedRowsString;
	}
</script>

<script>
	function saveTableData() {
		var item = {};
		item.sku = $("#sku").html();
		item.brand = $("#brandId").html();
		item.itemId = $("#itemId").val();
		item.itemName = $("#itemName").html();
		item.locationId = $("#locationId").val();
		item.location = $("#locationId").find('option:selected').text();
		item.costCenterId = $("#costCenterId").val();
		item.costCenter = $("#costCenterId").find('option:selected').text();
		item.qty = $("#quantity").val();
		item.uomId = $("#uom").val();
		item.uom = $("#uom").find('option:selected').text();
		item.estimatedPrice = $("#estimatedPrice").val();
		item.estimatedTotalPrice = $("#totalEstPrc").val();
		item.lastPurchaseUnitPrice = $("#lastPurchaseUnitPrice").val();
		item.lastPurchaseTotalPrice = $("#lastPurchaseTotalPrice").val();
		var datas = [];
		productOptions.api.forEachNode(function(rowNode, index) {
			datas.push(rowNode.data);
		});
		datas.push(item)
		productOptions.api.setRowData(datas);
		closeNav();
		$("#sku").html('');
		$("#brandId").html('');
		$("#itemId").html('');
		$("#itemName").html('');
		$("#locationId").val('');
		$("#quantity").val('');
		$("#uom").val('');
		$("#estimatedPrice").val('');
		$("#totalEstPrc").val('');
		$("#lastPurchaseUnitPrice").val('');
		$("#lastPurchaseTotalPrice").val('');
		$("#search").val('');
	}

	function saveData() {
		var datas = [];
		productOptions.api.forEachNode(function(rowNode, index) {

			var item = rowNode.data;
			item.desc = $("#desc").val();
			item.reqType = $("#reqType").val();
			item.reqPrior = $("#reqPrior").val();
			item.receiveDate = $("#receiveDate").val();
			item.holdStatus = $("#isHold").val();
			item.reqId = $("#reqId").val();
			item.moduleId = localStorage.getItem('module');
			item.componentId = localStorage.getItem('function');
			item.subComponentId = localStorage.getItem('activity');

			datas.push(item);
		});
		console.log(datas);
		saveRequisition(datas);
	}

	function saveRequisition(datas) {

		$.ajax({
			type : "POST",
			url : "view-requisition-save-th-ajax",
			dataType : "json",
			contentType : "application/json",
			data : JSON.stringify(datas),
			success : function(response) {

				if (response.message == "Success") {
					window.location.href = "/inventory/view-requisition";
				} else {
					swal({
						title : response.code,
						text : response.message,
						type : "warning"
					})
				}
			},
			error : function(data) {
				console.log(data)
			}
		}) //ajax ends

	}

	function cancelBar() {
		var id = document.getElementById("closeKey");
		id.style.display = "block";
		if ($('#quickFilter').val() == null || $('#quickFilter').val() == "") {
			id.style.display = "none";
		}
	}

	function getProductList() {
		var search = $("#search").val();
		if (search) {

			$
					.ajax({
						type : "POST",
						url : "view-requisition-get-product-list",
						dataType : 'json',
						contentType : 'application/json',
						data : search,
						success : function(response) {
							if (response.message == "success") {

								/* if (response.body.length != 0) {
									console.log(response.body);
									autocomplete(document.getElementById("search"),response.body);
								} */

								if (response.body.length != 0) {
									$("#search").css("background", "#FFF");
									var content = '<ul id="autocomplete-list1" style="margin-left:-40px; font-weight:100; font-size:14px; color:#ccc;">';
									for (var i = 0; i < response.body.length; i++) {
										content += '<li class="autocompletedata cp" onClick="selectAutocompleteValue1(\''
												+ response.body[i].itemId
												+ '\',\''
												+ response.body[i].itemName
												+ '\',\''
												+ response.body[i].sku
												+ '\',\''
												+ response.body[i].brand
												+ '\')">'
												+ response.body[i].itemName
												+ '</li>';
									}
									content += '</ul>';
									console.log("content " + content)
									$("#suggesstion-box1_").show();
									$("#suggesstion-box1_").html(content);

								} else {
									$("#search").css("background", "#FFF");
									var content = '<ul id="autocomplete-list1">';
									content += '<li onClick="selectAutocompleteValue()">'
											+ "No Data Found" + '</li>';
									content += '</ul>';
									$("#suggesstion-box1_").show();
									$("#suggesstion-box1_").html(content);
								}
							}
						},
						error : function(data) {
							console.log(data);
						}
					})
		}
	}

	function selectAutocompleteValue1(key, name, sku, brand) {

		if (key) {
			$("#itemName").html(name);
			$("#itemId").val(key);
			$("#brandId").html(brand);
			$("#sku").html(sku);
			$("#search").val(name)
			$("#search").attr('data-procat', key);
			$("#suggesstion-box1_").hide();
			//checkForDuplicate(key,counter);

		} else {

			$("#itemName").html("");
			$("#itemId").val("");
			$("#brandId").html("");
			$("#sku").html("");
			$("#search").val("");
			$("#search").attr('data-procat', "");
			$("#suggesstion-box1_").hide();

		}
	}
	function selectAutocompleteValue() {
		$("#itemName").html("");
		$("#itemId").val("");
		$("#brandId").html("");
		$("#sku").html("");
		$("#search").val("");
		$("#search").attr('data-procat', "");
		$("#suggesstion-box1_").hide();

	}
	function putOnHold() {
		var isHold = $("#isHold").val();
		if (isHold == '1') {
			$("#isHold").val('0');
			$("#putOnHold").removeClass('holdCls');
		} else if (isHold == '4'){
			$("#isHold").val('4');
			$("#putOnHold").addClass('holdCls');
		}
	}

	function viewRFQ() {
		localStorage.setItem('activity', 'ACT0021');
		window.location.href = "/inventory/view-quatation";
	}
</script>
</head>
<body>

	<div layout:fragment="content" class="maincontent">

		<div class="container-fluid">
			<div class="row">
				<div class="maincontentsec">
					<div class="content_padding">
						<div class="row margin_topbot">
							<div class="col-md-8 btn-hs">
								<div class="input-style row">
									<input type="text" placeholder="Search.." name="search"
										class="searchboxinput" onkeyup="cancelBar()"
										oninput="onQuickFilterChanged()" id="quickFilter">
									<div class="searchicon">
										<a href="#"><span style="display: none" id="closeKey"
											onclick="gridOptions.api.setQuickFilter(null);$('#quickFilter').val('');document.getElementById('closeKey').style.display='none';"
											class="close_i">X</span></a><a href="#"><i
											class="fa fa-search"></i></a>
									</div>
								</div>
							</div>
						</div>
						<div class="row" id="reqTable">

							<div class="col-md-6 btn-hs">
								<div class="font-design" id="totalReq">
									REQUISITION LIST (<span></span>)
								</div>
							</div>
							<div class="col-md-3 btn-hs">
								<div class="row">
									<button class="btn1" id="newBtn" onclick="switchPage()">NEW</button>
									<button class="btn2" id="copyBtn" onclick="copy()">COPY</button>
									<button class="btn3" id="newBtn" onclick="deleteFun()">DELETE</button>
								</div>
							</div>
							<div class="col-md-1 btn-hs ">
								<button class="btn2 centerbtn" onclick="approve()">APPROVE</button>
							</div>

							<div class="col-md-2 btn-hs">
								<button class="btn4">UPLOAD</button>
								<button class="btn4">DOWNLOAD</button>
							</div>

						</div>
						<div id="myGrid" style="width: 100%; height: 200px;"
							class="ag-theme-alpine"></div>

						<div class="collapse" id="demo">
							<div class="innerstickybg">
								<div class="row">

									<div class="col-md-3">
										Requisition ID:<span id="reqHeadId"></span>
									</div>
									<div class="col-md-6">
										<div class="hr4"></div>
										<div class="main-div">
											<div class="section2">
												<div id="createdDiv" class="green-box">
													<div class="green-box-heading">CREATED</div>
													<div class="date">9-OCT-20</div>
												</div>
											</div>
											<div class="section3">
												<div id="activeDiv" class="green-box">
													<div class="green-box-heading">ACTIVE</div>
													<!-- <div class="date">11-OCT-20</div> -->
												</div>
											</div>
											<div class="section4">
												<div id="completeDiv" class="grey-box">
													<div>COMPLETE</div>
												</div>
											</div>
											<div class="section5">
												<div id="onHoldDiv" class="grey-box">
													<div>ONHOLD</div>
												</div>
											</div>

										</div>
									</div>
									<div class="col-md-3" align="right">
										<button class="btn3" id="cancelBtn">Cancel</button>
										<button class="btn1" onclick="saveData()">Save</button>
									</div>
								</div>

							</div>
							<div class="row innersticky_contentgap">
								<div class="col-md-6">
									<div class="form-group">
										<label>Description</label>
										<textarea class="form-control" id="desc"
											style="line-height: 54px !important;"></textarea>
										<input type="hidden" id="reqId" />
									</div>
								</div>
								<div class="col-md-6">
									<div class="row">
										<div class="col-md-6">
											<div class="form-group">
												<label>Type</label>
												<div class="select">
													<select id="reqType">
														<option th:each="c:${requisitionTypeList}"
															th:value='${c.key}' th:text="${c.name}"
															th:selected="${c.key==employeeEmployment}"></option>
													</select>
												</div>
											</div>
										</div>

										<div class="col-md-6">
											<div class="form-group">
												<label>Priority</label>
												<div class="select">
													<select id="reqPrior">
														<option th:each="c:${requisitionPrioList}"
															th:value='${c.key}' th:text="${c.name}"
															th:selected="${c.key==employeeEmployment}"></option>
													</select>
												</div>
											</div>
										</div>

									</div>
									<div class="row">
										<div class="col-md-6">
											<div class="form-group">
												<label>Receive By Date</label> <input type="text"
													id="receiveDate" class="form-control" readonly>
											</div>
										</div>

										<div class="col-md-6">
											<div class="form-group">
												<button class="btn2 putonhold" id="putOnHold"
													onclick="putOnHold()">PUT ON HOLD</button>
												<input type="hidden" value="0" id="isHold" />
											</div>
										</div>
									</div>
								</div>
							</div>
							<div id="main_content">
								<div class="wrapper center-block">
									<div class="panel-group" id="accordion" role="tablist"
										aria-multiselectable="true">
										<div class="panel panel-default">
											<div class="panel-heading active" role="tab" id="headingOne">
												<h4 class="panel-title">
													<a role="button" data-toggle="collapse"
														data-parent="#accordion" href="#itemList"
														aria-expanded="true" aria-controls="itemList"> Item
														List </a>
												</h4>
											</div>
											<div id="itemList" class="panel-collapse collapse show"
												role="tabpanel" aria-labelledby="headingOne">
												<div class="row">

													<div class="col-md-4 btn-hs1">
														<div class="font-design"></div>
													</div>
													<div class="col-md-3 btn-hs1">
														<div class="row">
															<button class="btn1" id="newBtn1" onclick="openNav()">NEW</button>
															<button class="btn3" id="newBtn"
																onclick="deleteProduct()">DELETE</button>


														</div>
													</div>
													<div class="col-md-3 btn-hs1">
														<button class="btn2 btn_extend">Purchase History</button>
														<button class="btn2 btn_extend" onclick="stockReport()">Stock
															History</button>
													</div>

													<div class="col-md-2 btn-hs1" align="right">

														<button class="btn4">Download</button>
													</div>

												</div>
												<div id="product" style="width: 100%; height: 200px;"
													class="ag-theme-alpine"></div>


											</div>

											<!-- <div class="butttonsec btn-hs">
												<button class="btn1" id="newBtn">NEW</button>
												<button class="btn2" id="copyBtn">COPY</button>
												<button class="btn3" data-toggle="modal"
													data-target="#delete">DELETE</button>

												<div class="buttongap"></div>

												<button class="btn2">APPROVE</button>
												<button class="btn2">POST</button>

												<div class="buttongap"></div>

												<button class="btn2" data-toggle="modal"
													data-target="#myModal1">ALLOCATE VENDOR</button>
											</div> -->

										</div>

										<div class="panel panel-default">
											<div class="panel-heading active" role="tab" id="headingtwo">
												<h4 class="panel-title">
													<a role="button" data-toggle="collapse"
														data-parent="#accordion" href="#activityone"
														aria-expanded="true" aria-controls="itemList">
														Activities </a>
												</h4>
											</div>
											<div id="activityone" class="panel-collapse collapse show"
												role="tabpanel" aria-labelledby="headingtwo">
												<div class="row">

													<div class="col-md-6 btn-hs1">
														<div class="font-design"></div>
													</div>
													<!-- <div class="col-md-2 btn-hs1">
														<div class="row">
															<button class="btn1" id="newBtn1">NEW</button>

															<button class="btn3" data-toggle="modal"
																data-target="#delete">DELETE</button>

														</div>
													</div>   -->
													<div class="col-md-3 btn-hs1">
														<button class="btn2">Create PO</button>
														<button class="btn2" onclick="viewRFQ()">Create
															RFQ</button>
													</div>

													<div class="col-md-3 btn-hs1" align="right">
														<button class="btn4">Upload</button>
														<button class="btn4">Download</button>
													</div>

												</div>
												<div id="activity" style="width: 100%; height: 200px;"
													class="ag-theme-alpine"></div>


											</div>
										</div>
									</div>


									<div id="mySidenav" class="sidenav">
										<div class="slidebox">
											<div class="row">
												<div class="col-md-9">
													<div class="edit">
														SKU :<span id="skuEditId"></span>
													</div>
												</div>
												<div class="col-md-3">
													<div class="arrow">
														<a href="javascript:void(0)" class="closebtn"
															onclick="closeNav()"><i class="ti-arrow-right"></i></a>
													</div>
												</div>
											</div>
											<div class="chartbtnsec">
												<div class="row">
													<button class="btn4" onclick="closeNav()">CANCEL</button>
													<button class="btn3" onclick="deleteProduct()">DELETE</button>
													<button class="btn1" onclick="saveTableData()">SAVE</button>
												</div>
											</div>

											<div class="row">
												<div class="col-lg-9">
													<div class="form-group">

														<div class="inner_search">

															<div class="input-style1 row">
																<div class="autocomplete">
																	<input id="search" type="text" name="search"
																		class="inner_searchboxinput" placeholder="Search"
																		onkeyup='getProductList()'>
																</div>
																<!-- <div class="searchicon1">
																	<a href="#"><span class="close_i"><i class="ti-close"></i></span></a> 
																	<a href="#"> <span class="close_i"><i class="ti-search srchicon"></i></span></a>
																</div> -->
																<div class="searchicon1">
																	<a href="#"><span
																		style="display: block; border-right: 1px solid rgb(204, 204, 204); padding-right: 5px;"
																		id="closeKey"
																		onclick="gridOptions.api.setQuickFilter(null);$('#quickFilter').val('');document.getElementById('closeKey').style.display='none';"
																		class="close_i"><i class="ti-close srchicon"></i></span></a><a
																		href="#" style="color: #ccc; margin-top: -5px;"><i
																		class="ti-search srchicon"></i></a>

																</div>

															</div>
															<!-- <div class="input-style1 row">
																<input type="text" placeholder="Search.." name="search"
																	class="inner_searchboxinput" onkeyup="cancelBar();getProductList();"  id="search">
																<div class="searchicon1">
																	<a href="#"> <i class="ti-search srchicon"></i></a>
																</div>
																<div id="suggesstion-box1_"></div> 
															</div> -->
														</div>

														<div id="suggesstion-box1_"></div>
													</div>
												</div>
												<div class="col-lg-3 mrt_6">
													<div class="form-group">
														<button class="btn2 ">Browse</button>
													</div>
												</div>
											</div>

											<div class="row">
												<div class="col-lg-6">
													<div class="form-group">
														<label>SKU</label> &nbsp; &nbsp; <span id="sku" class="fetchdata"></span>
													</div>
												</div>
												<div class="col-lg-6">
													<div class="form-group">
														<label>Brand</label><span id="brandId" class="fetchdata"></span>
													</div>
												</div>
											</div>

											<div class="row">
												<div class="col-lg-8">
													<div class="form-group">
														<label>Item Name</label><span id="itemName" class="fetchdata"></span><input
															type="hidden" id="itemId">
														<!-- <div class="select">
															<select id="itemId">
																<option th:each="c:${productList}"
																	th:value='${c.itemId}' th:text="${c.itemName}"></option>
															</select>
														</div> -->
													</div>
												</div>
												<div class="col-lg-8">
													<div class="form-group">
														<label>Location</label>
														<div class="select">
															<select id="locationId">
																<option th:each="c:${locationList}" th:value='${c.key}'
																	th:text="${c.name}"></option>
															</select>
														</div>
													</div>
												</div>
												<div class="col-lg-8">
													<div class="form-group">
														<label>Cost Center</label>
														<div class="select">
															<select id="costCenterId">
																<option th:each="c:${costCenterList}"
																	th:value='${c.key}' th:text="${c.name}"></option>
															</select>
														</div>
													</div>
												</div>
											</div>
											<div class="row">
												<div class="col-lg-6">
													<div class="form-group">
														<label>Quantity</label> <input type="text"
															class="form-control transparenttxtbox" id="quantity">
													</div>
												</div>
												<div class="col-lg-6">
													<div class="form-group">
														<label>UOM</label>
														<div class="select">
															<select id="uom">
																<option th:each="c:${uomList}" th:value='${c.key}'
																	th:text="${c.name}"></option>
															</select>
														</div>

													</div>
												</div>
											</div>

											<div class="row">
												<div class="col-lg-6">
													<div class="form-group">
														<label>Estimated Price</label> <input type="text"
															class="form-control transparenttxtbox"
															id="estimatedPrice">
													</div>
												</div>
												<div class="col-lg-6">
													<div class="form-group">
														<label>Estimated Total Price</label> <input type="text"
															class="form-control transparenttxtbox" id="totalEstPrc">
													</div>
												</div>
											</div>
											<div class="row">
												<div class="col-lg-6">
													<div class="form-group">
														<label>Last Purchase unit Price</label> <input type="text"
															class="form-control transparenttxtbox"
															id="lastPurchaseUnitPrice">
													</div>
												</div>
												<div class="col-lg-6">
													<div class="form-group">
														<label>Last Purchase Total Price</label> <input
															type="text" class="form-control transparenttxtbox"
															id="lastPurchaseTotalPrice">
													</div>
												</div>
											</div>

										</div>
									</div>
								</div>

							</div>
						</div>





					</div>
					<div class="modal fade" id="lineGraph">
						<div class="modal-dialog modal-lg">
							<div class="modal-content large-model">

								<div align="right">
									<button type="button" class="close" data-dismiss="modal">
										<i class="ti-close" style="font-size: 14px;"></i>
									</button>
								</div>
								<!-- Modal body -->
								<div class="modal-body">
									<div class="row" id="lineGraphDiv">
										<div class="col-md-12">
											<div id="chart" class="collapse show">
												<div style="width: 90%; height: 280px; margin: 0 auto;">
													<div id="container1" style="width: 100%; height: 280px;"></div>
												</div>
												<div style="width: 90%; height: auto; margin: 0 auto;">
													<div class="row">
														<div class="col-md-12">

															<div align="right" class="pdficonsec">
																<i class="fa fa-file-pdf-o fa-2x pdf"
																	onclick="downloadChartPdf()"></i> <i
																	class="fa fa-file-excel-o fa-2x excel"
																	onclick="getExcelReport()"></i>
															</div>
															<table id="graphTable" class="newtbl">
															</table>
														</div>

													</div>
												</div>
											</div>
										</div>
									</div>

								</div>
								<!-- Modal footer -->



							</div>
						</div>
					</div>
					<!-- delete modal start -->
					<div id="delete" class="modal fade show" aria-modal="true">
						<div class="modal-dialog modal-confirm">
							<div class="modal-content">
								<div class="modal-header flex-column">
									<button type="button" class="close" data-dismiss="modal"
										aria-hidden="true" onclick="cancelModalBtn()">
										<i class="ti-close modal-close"></i>
									</button>
								</div>
								<div class="modal-body">
									<p>Do you really want to delete these records? This process
										cannot be undone.</p>
								</div>
								<div class="modal-footer justify-content-center"
									style="margin-top: -30px;">

									<button type="button" class="btn1" data-dismiss="modal"
										onclick="cancelModalBtn();">Cancel</button>
									<button type="button" class="btn3" onclick="deleteOnclick()">Delete</button>
								</div>
							</div>
						</div>
					</div>

					<!-- delete product modal start -->
					<div id="deleteProduct" class="modal fade show" aria-modal="true">
						<div class="modal-dialog modal-confirm">
							<div class="modal-content">
								<div class="modal-header flex-column">
									<button type="button" class="close" data-dismiss="modal"
										aria-hidden="true" onclick="cancelModalProductBtn()">
										<i class="ti-close modal-close"></i>
									</button>
								</div>
								<div class="modal-body">
									<p>Do you really want to delete these records? This process
										cannot be undone.</p>
								</div>
								<div class="modal-footer justify-content-center"
									style="margin-top: -30px;">

									<button type="button" class="btn1" data-dismiss="modal"
										onclick="cancelModalBtn();">Cancel</button>
									<button type="button" class="btn3"
										onclick="deleteProductOnclick()">Delete</button>
								</div>
							</div>
						</div>
					</div>

					<!-- alert modal start -->
					<div id="alert" class="modal fade show" aria-modal="true">
						<div class="modal-dialog modal-confirm">
							<div class="modal-content">
								<div class="modal-header flex-column">
									<button type="button" class="close" data-dismiss="modal"
										aria-hidden="true" onclick="cancelModalBtn()">
										<i class="ti-close modal-close"></i>
									</button>
								</div>
								<div class="modal-body">
									<p id="textId"></p>
								</div>
								<div class="modal-footer justify-content-center"
									style="margin-top: -30px;">

									<button type="button" class="btn1" data-dismiss="modal"
										onclick="cancelModalBtn();">Cancel</button>
									<!-- <button type="button" class="btn3" onclick="deleteOnclick()">Delete</button> -->
								</div>
							</div>
						</div>
					</div>

				</div>
			</div>
		</div>
	</div>
</body>
</html>